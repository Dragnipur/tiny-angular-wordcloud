angular.module("tangcloud",[]).directive("tangCloud",["$interpolate","$compile","$timeout",function(a,b,c){var d={restrict:"E",scope:{width:"=",height:"=",words:"="},template:"<div id='test' class='tangcloud'><span ng-repeat='entry in words'>{{entry.word}}</span></div>",compile:function(b){return b.children().children().addClass("tangcloud-item-"+a.startSymbol()+"entry.size"+a.endSymbol()),function(a,b){function d(){for(var b=a.words.length;b>0;b--)for(var c=1,d=0;b>c;d++){if(a.words[d].size<a.words[c].size){var e=a.words[d];a.words[d]=a.words[c],a.words[c]=e}c++}}function e(){c(function(){for(var a=b.children().eq(0).children(),c=a.length,d=0;c>d;d++)f(a.eq(d))})}function f(a){for(var b=a[0].offsetHeight,c=a[0].offsetWidth,d={startX:j,startY:k,endX:j+c,endY:k+b},e=0;g(d);){var f=.1*e;d.startX=j+2*f*Math.cos(f)-c/2,d.startY=k+2*f*Math.sin(f)-b/2,d.endX=d.startX+c,d.endY=d.startY+b,e+=10}l.push(d),i(a,d.startX,d.startY)}function g(a){for(var b=0;b<l.length;b++)if(h(a,l[b]))return!0;return!1}function h(a,b){return a.startX>b.endX||a.endX<b.startX?!1:a.startY>b.endY||a.endY<b.startY?!1:!0}function i(a,b,c){var d="position: absolute; left:"+b+"; top: "+c;a.attr("style",d)}var j=a.width/2,k=a.height/2,l=[];d(),e()}}};return d}]);